/*******************************************************
 * CH4 Intro + Result 공용 스타일 (stylelint 호환)
 ********************************************************/
@use 'sass:color';

/* 색/레이어 */
$accent: #19e6ff;
$text: #e8f0f6;
$z-back: 11; // 네비 버튼이 항상 위
$z-cta: 9;

/* 리셋/베이스 */
* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

html,
body {
  height: 100%;
}

body {
  font-family: 'Noto Sans KR', system-ui, -apple-system, sans-serif;
  color: $text;
  background: #000; // 기본은 검정
}

/* ===================== 인트로 ===================== */

/* index.html 에서 <body class="ch4-intro"> */
body.ch4-intro {
  background: linear-gradient(180deg, rgb(0 0 0 / 0%), rgb(0 0 0 / 0%)),
    url('../assets/img/bg/introBg.webp') center/cover no-repeat fixed;
}

/* 좌상단 back 버튼 (인트로/결과 공용) */
.back-btn {
  position: fixed;
  top: max(16px, env(safe-area-inset-top));
  left: max(16px, env(safe-area-inset-left));
  z-index: $z-back;
  display: inline-grid;
  place-items: center;
  width: clamp(36px, 4.5vw, 48px);
  height: clamp(36px, 4.5vw, 48px);
  cursor: pointer;
  background: transparent;
  border: 0;

  img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    filter: drop-shadow(0 10px 20px rgb(0 0 0 / 50%));
  }

  &:focus-visible {
    outline: 2px solid $accent;
    outline-offset: 3px;
    border-radius: 12px;
  }
}

/* 인트로 중앙 레이아웃 */
#ch4-index.container {
  display: grid;
  gap: 12px;
  place-content: center;
  min-height: 100dvh;
  padding: 10vh 16px 22vh;
  text-align: center;

  h1 {
    font-family: 'Noto Serif KR', serif;
    font-size: clamp(40px, 8.5vw, 120px);
    font-weight: 900;
    letter-spacing: 0.06em;
    text-shadow: 0 0 14px rgb(0 0 0 / 60%);
  }

  p {
    font-family: 'Noto Serif KR', serif;
    font-size: clamp(14px, 2.2vw, 22px);
    opacity: 0.92;
  }
}

/* 시작하기 버튼: 텍스트만 (인트로) */
#start-btn {
  position: fixed;
  bottom: calc(10vh + env(safe-area-inset-bottom));
  left: 50%;
  z-index: $z-cta;
  display: inline-grid;
  place-items: center;
  padding: 16px 36px;
  font-size: clamp(32px, 8.5vw, 56px);
  font-weight: 900;
  color: #e0e0e0;
  letter-spacing: 0.02em;
  text-decoration: none;
  text-shadow: 0 0 14px rgb(0 0 0 / 45%);
  cursor: pointer;
  background: transparent;
  border: 0;
  border-radius: 0;
  box-shadow: none;
  transform: translateX(-50%);
  transition: color 0.15s ease, text-shadow 0.15s ease, transform 0.12s ease;

  &:hover {
    color: $accent;
    text-shadow: 0 0 14px color.change($accent, $alpha: 0.55);
    transform: translateX(-50%) translateY(-2px);
  }

  &:active {
    transform: translateX(-50%) translateY(0);
  }

  &:focus-visible {
    outline: 3px solid color.change($accent, $alpha: 0.6);
    outline-offset: 4px;
  }
}

/* ===================== 결과 페이지 ===================== */

/* result.html 에서 <body class="ch4-result" style="--ch4-bg:url(..)"> 사용
   ⚠️ var()로 치환되는 url은 '이 CSS 파일 위치' 기준으로 해석됨 */
body.ch4-result {
  --ch4-bg: url('../assets/img/bg/questionBg.webp'); // 기본값

  background: linear-gradient(180deg, rgb(0 0 0 / 18%), rgb(0 0 0 / 22%)),
    var(--ch4-bg) center/cover no-repeat fixed;
}

/* 우상단 HOME 버튼 */
.home-btn {
  position: fixed;
  top: max(16px, env(safe-area-inset-top));
  right: max(16px, env(safe-area-inset-right));
  z-index: $z-back;
  display: inline-grid;
  grid-auto-flow: column;
  gap: 8px;
  place-items: center;
  padding: 6px 10px;
  color: $text;
  text-decoration: none;
  background: rgb(0 0 0 / 30%);
  border-radius: 12px;

  img {
    width: 22px;
    height: 22px;
    filter: drop-shadow(0 6px 12px rgb(0 0 0 / 45%));
  }

  span {
    font-size: clamp(12px, 1.6vw, 14px);
    font-weight: 700;
    letter-spacing: 0.02em;
  }

  &:hover {
    background: rgb(0 0 0 / 45%);
  }

  &:focus-visible {
    outline: 2px solid $accent;
    outline-offset: 3px;
  }
}

/* 결과 컨테이너 기본 여백 */
#ch4-result.container {
  min-height: 100dvh;
  padding: clamp(16px, 3vw, 32px);
}

/* 모션 최소화 */
@media (prefers-reduced-motion: reduce) {
  .back-btn,
  #start-btn,
  .home-btn {
    transition: none;
  }
}
