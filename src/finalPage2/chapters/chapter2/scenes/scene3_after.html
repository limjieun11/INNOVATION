<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>scene3_after</title>
    <!-- ✅ 반드시 먼저 Three.js → Panolens -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.105.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/panolens@0.12.0/build/panolens.min.js"></script>
    <link rel="stylesheet" href="./scss/scene_common.css" />
  </head>
  <body>
    <audio
      id="bgm1"
      src="./BGM/Itaewon_accident1.mp3"
      loop
      preload="auto"
    ></audio>
    <audio
      id="bgm2"
      src="./BGM/Itaewon_accident2.mp3"
      loop
      preload="auto"
    ></audio>
    <main class="scene-page">
      <div id="viewer"></div>
      <button id="next-button">다음</button>
    </main>

    <script src="js/scene_common.js"></script>
    <script>
      initPanorama(
        './images/panorama/scene3_after.webp', // ✅ 상대경로 주의
        'scene4_before.html', // ✅ 다음 페이지로 이동
        false // ✅ 이스터에그 없음
      );
      document.addEventListener('DOMContentLoaded', () => {
        const bgm1 = document.getElementById('bgm1');
        const bgm2 = document.getElementById('bgm2');

        // ✅ 음량 조절 코드 추가
        bgm1.volume = 0.9;
        bgm2.volume = 0.9;

        document.body.addEventListener(
          'click',
          () => {
            bgm1
              .play()
              .catch((e) => console.log('BGM 1 autoplay was prevented.'));
            bgm2
              .play()
              .catch((e) => console.log('BGM 2 autoplay was prevented.'));
          },
          { once: true }
        );
      });
    </script>
  </body>
</html>
